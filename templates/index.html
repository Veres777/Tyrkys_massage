<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="UTF-8">
  <title>Tyrkys masÃ¡Å¾e â€“ Jemnost, kterÃ¡ vychÃ¡zÃ­ z vÄ›domÃ© pÃ©Äe</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@500;700&family=Manrope:wght@400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.css">
  <link rel="stylesheet" href="/static/style.css">
  <script src="https://js.stripe.com/v3/"></script>
  <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
  <script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/cs.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.js"></script>

</head>
<body>

<!-- Navigace -->
<nav class="navbar">
  <div class="nav-container">
    <div class="logo">Tyrkys masÃ¡Å¾e</div>
    <ul class="nav-links">
      <li><a href="#uvod">Ãšvod</a></li>
      <li><a href="#filozofie">Filozofie</a></li>
      <li><a href="#sluzby">SluÅ¾by</a></li>
      <li><a href="#proc">O mnÄ›</a></li>
      <li><a href="#rezervace-form">Rezervace</a></li>
    </ul>
  </div>
</nav>

<header class="hero" id="uvod">
  <div class="hero-overlay" data-aos="fade-up">
    <h1 class="hero-title">Tyrkys masÃ¡Å¾e</h1>
    <p class="hero-slogan">Jemnost, kterÃ¡ vychÃ¡zÃ­ z vÄ›domÃ© pÃ©Äe.</p>
    <a href="#rezervace-form" class="hero-btn">ğŸŒ¸ Chci si rezervovat termÃ­n</a>
  </div>
</header>

<section class="section center-text" id="filozofie" data-aos="fade-up">
  <h2>VÃ­ce neÅ¾ masÃ¡Å¾</h2>
  <p class="text">V Tyrkys masÃ¡Å¾Ã­ch se kaÅ¾dÃ½ dotek stÃ¡vÃ¡ rituÃ¡lem. VÄ›Å™Ã­me, Å¾e pÃ©Äe nenÃ­ luxus, ale pÅ™irozenÃ¡ potÅ™eba â€“ a kaÅ¾dÃ¡ Å¾ena si zaslouÅ¾Ã­ pocit, Å¾e se o ni nÄ›kdo starÃ¡. V jemnosti je sÃ­la.</p>
</section>

<section class="section" id="sluzby" data-aos="fade-up">
  <h2>NabÃ­dka masÃ¡Å¾Ã­</h2>
  <div class="service-grid">
    <div class="service-box" style="background-image: url('/static/woman-receiving-belly-massage-spa-salon.jpg');" data-aos="zoom-in" data-aos-delay="100">
      <div class="service-box-content">
        <h3>LymfatickÃ¡ masÃ¡Å¾</h3>
        <p>60 min â€“ 1000 KÄ<br>90 min â€“ 1500 KÄ</p>
      </div>
    </div>
    <div class="service-box" style="background-image: url('/static/massage-2441746.jpg');" data-aos="zoom-in" data-aos-delay="200">
      <div class="service-box-content">
        <h3>SportovnÃ­ masÃ¡Å¾</h3>
        <p>30 min â€“ 600 KÄ<br>60 min â€“ 1000 KÄ</p>
      </div>
    </div>
    <div class="service-box" style="background-image: url('/static/close-up-therapist-massaging-back.jpg');" data-aos="zoom-in" data-aos-delay="300">
      <div class="service-box-content">
        <h3>KlasickÃ¡ relaxace</h3>
        <p>30 min â€“ 600 KÄ<br>60 min â€“ 1000 KÄ<br>90 min â€“ 1500 KÄ</p>
      </div>
    </div>
    <div class="service-box" style="background-image: url('/static/pexels-koolshooters-6628612.jpg');" data-aos="zoom-in" data-aos-delay="400">
      <div class="service-box-content">
        <h3>RegeneraÄnÃ­ masÃ¡Å¾</h3>
        <p>60 min â€“ 1000 KÄ<br>90 min â€“ 1500 KÄ</p>
      </div>
    </div>
    <div class="service-box" style="background-image: url('/static/pexels-jonathanborba-27684608.jpg');" data-aos="zoom-in" data-aos-delay="500">
      <div class="service-box-content">
        <h3>BaÅˆkovÃ¡ masÃ¡Å¾</h3>
        <p>30 min â€“ 600 KÄ<br>60 min â€“ 1000 KÄ</p>
      </div>
    </div>
    <div class="service-box" style="background-image: url('/static/pexels-tima-miroshnichenko-6187847.jpg');" data-aos="zoom-in" data-aos-delay="600">
      <div class="service-box-content">
        <h3>MedovÃ¡ masÃ¡Å¾</h3>
        <p>30 min â€“ 700 KÄ<br>60 min â€“ 1200 KÄ</p>
      </div>
    </div>
    <div class="service-box" style="background-image: url('/static/pexels-olia-danilevich-9335966.jpg');" data-aos="zoom-in" data-aos-delay="700">
      <div class="service-box-content">
        <h3>MasÃ¡Å¾ hlavy a dekoltu</h3>
        <p>30 min â€“ 600 KÄ</p>
      </div>
    </div>
    <div class="service-box" style="background-image: url('/static/unrecognizable-therapist-performing-maderotherapy-woman-s-legs-massage-treatment-spa.jpg');" data-aos="zoom-in" data-aos-delay="800">
      <div class="service-box-content">
        <h3>AnticelulitidovÃ¡ masÃ¡Å¾</h3>
        <p>60 min â€“ 1000 KÄ</p>
      </div>
    </div>
    <div class="service-box" style="background-image: url('/static/pexels-jonathanborba-19641816.jpg');" data-aos="zoom-in" data-aos-delay="900">
      <div class="service-box-content">
        <h3>RelaxaÄnÃ­ masÃ¡Å¾ s kokosovÃ½m olejem</h3>
        <p>60 min â€“ 1200 KÄ</p>
      </div>
    </div>
  </div>
</section>

<section class="section center-text" id="proc" data-aos="fade-up">
  <h2>ProÄ prÃ¡vÄ› Tyrkys masÃ¡Å¾e</h2>
  <p class="text">MasÃ¡Å¾ nenÃ­ jen pro ÃºlÃ©vu â€“ je to chvÃ­le, kdy svÄ›t zpomalÃ­ a ÄlovÄ›k znovu najde rovnovÃ¡hu. KaÅ¾dÃ© tÄ›lo si zaslouÅ¾Ã­ vÄ›domou pÃ©Äi.</p>
</section>


<section class="upozorneni-box" data-aos="fade-up">
  <div class="upozorneni-content">
    <span class="ikona">âš ï¸</span>
    <p>
      <strong>UpozornÄ›nÃ­:</strong><br>
      MasÃ¡Å¾nÃ­ studio Tyrkys masÃ¡Å¾e <strong>nenabÃ­zÃ­ erotickÃ© masÃ¡Å¾e</strong> ani Å¾Ã¡dnÃ© sexuÃ¡lnÃ­ sluÅ¾by.
      ProsÃ­me o respektovÃ¡nÃ­ tÃ©to skuteÄnosti. DÄ›kujeme za pochopenÃ­.
    </p>
  </div>
</section>

<section class="section center-text" id="adresa" data-aos="fade-up">
  <h2>Kde nÃ¡s najdete</h2>
  <p class="text"><strong>PolskÃ¡ 12, Praha 2, PSÄŒ 120 00</strong></p>
  <div id="mapa"></div>
  <div style="margin-top:30px;">
    <a href="https://www.google.com/maps/dir/?api=1&destination=PolskÃ¡+12,+Praha+2,+120+00&travelmode=driving" class="cta-button" target="_blank">ğŸš— Autem</a>
    <a href="https://www.google.com/maps/dir/?api=1&destination=PolskÃ¡+12,+Praha+2,+120+00&travelmode=transit" class="cta-button" target="_blank">ğŸš‹ MHD</a>
    <a href="https://www.google.com/maps/dir/?api=1&destination=PolskÃ¡+12,+Praha+2,+120+00&travelmode=walking" class="cta-button" target="_blank">ğŸš¶ PÄ›Å¡ky</a>
  </div>
</section>
<section class="section" id="rezervace">
  <h2 class="center-text">Rezervace termÃ­nu</h2>

  <div class="form-wrapper">
    <form id="rezervace-form">
      <label for="jmeno">JmÃ©no:</label>
      <input type="text" id="jmeno" name="jmeno" required>

      <label for="telefon">Telefon:</label>
      <input type="tel" id="telefon" name="telefon" required>

      <label for="email">Email:</label>
      <input type="email" id="email" name="email" required>

      <label for="typ-masaze">Typ masÃ¡Å¾e:</label>
      <select id="typ-masaze" name="typ" required>
        <option value="">-- Vyberte masÃ¡Å¾ --</option>
        <option value="klasicka-30" data-cena="600" data-delka="30">KlasickÃ¡ relaxaÄnÃ­ â€“ 30 min (600 KÄ)</option>
        <option value="klasicka-60" data-cena="1000" data-delka="60">KlasickÃ¡ relaxaÄnÃ­ â€“ 60 min (1000 KÄ)</option>
        <option value="klasicka-90" data-cena="1500" data-delka="90">KlasickÃ¡ relaxaÄnÃ­ â€“ 90 min (1500 KÄ)</option>
        <option value="lymfa-60" data-cena="1000" data-delka="60">LymfatickÃ¡ â€“ 60 min (1000 KÄ)</option>
        <option value="lymfa-90" data-cena="1500" data-delka="90">LymfatickÃ¡ â€“ 90 min (1500 KÄ)</option>
        <option value="sportovni-30" data-cena="600" data-delka="30">SportovnÃ­ â€“ 30 min (600 KÄ)</option>
        <option value="sportovni-60" data-cena="1000" data-delka="60">SportovnÃ­ â€“ 60 min (1000 KÄ)</option>
        <option value="regeneracni-60" data-cena="1000" data-delka="60">RegeneraÄnÃ­ â€“ 60 min (1000 KÄ)</option>
        <option value="regeneracni-90" data-cena="1500" data-delka="90">RegeneraÄnÃ­ â€“ 90 min (1500 KÄ)</option>
        <option value="bankova-30" data-cena="600" data-delka="30">BaÅˆkovÃ¡ â€“ 30 min (600 KÄ)</option>
        <option value="bankova-60" data-cena="1000" data-delka="60">BaÅˆkovÃ¡ â€“ 60 min (1000 KÄ)</option>
        <option value="medova-30" data-cena="700" data-delka="30">MedovÃ¡ â€“ 30 min (700 KÄ)</option>
        <option value="medova-60" data-cena="1200" data-delka="60">MedovÃ¡ â€“ 60 min (1200 KÄ)</option>
        <option value="hlava-30" data-cena="600" data-delka="30">Hlava a dekolt â€“ 30 min (600 KÄ)</option>
        <option value="celulitida-60" data-cena="1000" data-delka="60">AnticelulitidovÃ¡ â€“ 60 min (1000 KÄ)</option>
        <option value="kokos-60" data-cena="1200" data-delka="60">KokosovÃ½ olej â€“ 60 min (1200 KÄ)</option>
        <option value="lavove-90" data-cena="1700" data-delka="90">LÃ¡vovÃ© kameny â€“ 90 min (1700 KÄ)</option>
      </select>

      <label for="datum">Datum:</label>
      <input type="text" id="datum" name="datum" placeholder="Vyberte datum" required>

      <label for="cas">ÄŒas:</label>
      <select id="cas" name="cas" required>
        <option value="">Nejprve vyberte datum</option>
      </select>

      <div id="cena-zobrazena"></div>
      <input type="hidden" id="cena" name="cena">
      <input type="hidden" id="delka" name="delka"> <!-- âœ… NovÄ› pÅ™idanÃ© -->

      <div id="platba-box" style="display: none;">
         <div id="payment-element"></div>
         <button id="pay-button">Zaplatit</button>
      </div>

      <button type="submit">PokraÄovat k platbÄ›</button>
    </form>
  </div>
</section>


<section class="section center-text" id="kontakt" data-aos="fade-up">
  <h2>Kontakt</h2>
  <p>Pro rezervaci termÃ­nu mÄ› prosÃ­m kontaktujte:</p>
  <p><strong>Telefon:</strong> +420 123 456 789</p>
  <p><strong>Email:</strong> info@tyrkysmasaze.cz</p>
</section>

<div id="den-alert" class="den-popup" style="display: none;">
  <span id="den-alert-text"></span>
</div>

<footer class="footer">
  &copy; 2025 Tyrkys masÃ¡Å¾e &nbsp;|&nbsp; Jemnost, kterÃ¡ vychÃ¡zÃ­ z vÄ›domÃ© pÃ©Äe
</footer>


<script>
  document.addEventListener("DOMContentLoaded", function () {
    AOS.init({ duration: 800, once: true });

    flatpickr("#datum", {
      locale: "cs",
      dateFormat: "Y-m-d",
      minDate: "today",
      weekNumbers: true,
      disable: [
        function(date) {
          return (date.getDay() === 6 || date.getDay() === 0); // Sobota a nedÄ›le blokovanÃ©
        }
      ],
      onDayCreate: function(dObj, dStr, fp, dayElem) {
        const date = dayElem.dateObj;
        const den = date.getDay();
        if (den === 6) dayElem.classList.add("sobota");
        if (den === 0) dayElem.classList.add("nedele");
      },
      onChange: function(selectedDates, dateStr) {
        const den = selectedDates[0].getDay();
        const casSelect = document.getElementById("cas");
        casSelect.innerHTML = "";

        if (den === 6) {
          showPopup("Sobota pouze po domluvÄ›.");
          casSelect.innerHTML = '<option disabled selected>Sobota pouze po domluvÄ›</option>';
          return;
        }
        if (den === 0) {
          showPopup("NedÄ›le â€“ zavÅ™eno.");
          casSelect.innerHTML = '<option disabled selected>NedÄ›le â€“ zavÅ™eno</option>';
          return;
        }

        const typ = document.getElementById("typ-masaze");
        const option = typ.selectedOptions[0];
        const delka = option ? parseInt(option.getAttribute("data-delka")) : 0;

        if (!dateStr || !delka) return;

        fetch("/volne-casy", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ datum: dateStr, delka })
        })
        .then(res => res.json())
        .then(data => {
          if (!data.cas || data.cas.length === 0) {
            casSelect.innerHTML = '<option disabled selected>Å½Ã¡dnÃ© volnÃ© Äasy</option>';
            return;
          }

          data.cas.forEach(cas => {
            const opt = document.createElement("option");
            opt.value = cas;
            opt.text = cas;
            casSelect.appendChild(opt);
          });
        });
      }
    });

   document.getElementById("typ-masaze").addEventListener("change", function () {
  const option = this.selectedOptions[0];
  const cena = option.getAttribute("data-cena");
  const delka = option.getAttribute("data-delka");

  document.getElementById("cena-zobrazena").innerText = `Cena: ${cena} KÄ`;
  document.getElementById("cena").value = cena;
  document.getElementById("delka").value = delka; // âœ… pÅ™idÃ¡no
});

    const stripe = Stripe("pk_test_51RXQROB0S949aQzWGBEQAFJ41YkCKxSNVzByD1TpQ42oFv5C6t5gqUDiCmJ0ccS49bYJidZJch9ydXLd8jeGNbR100VikvXrPU");

    async function handlePayment() {
  const formData = new FormData(document.querySelector('#rezervace-form'));
  const data = Object.fromEntries(formData.entries());

  if (!data.typ) {
    alert("ProsÃ­m vyberte typ masÃ¡Å¾e.");
    return;
  }

  const res = await fetch('/create-payment-intent', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify(data)
  });

  const { clientSecret } = await res.json();

  const elements = stripe.elements({ clientSecret }); // âœ… ĞºĞ»ÑÑ‡ĞµĞ²Ğ¾Ğ¹ Ğ¼Ğ¾Ğ¼ĞµĞ½Ñ‚
  const paymentElement = elements.create('payment');
  paymentElement.mount('#payment-element');

  document.querySelector('#platba-box').style.display = 'block';

  document.getElementById('pay-button').addEventListener('click', async () => {
    const { error } = await stripe.confirmPayment({
      elements,
      confirmParams: {
        return_url: window.location.origin + "/platba-uspesna"
      }
    });

    if (error) alert(error.message);
  });
}

    document.getElementById('rezervace-form').addEventListener('submit', function (e) {
      e.preventDefault();
      handlePayment();
    });

    function showPopup(zprava) {
      let popup = document.getElementById("rez-popup");
      if (!popup) {
        popup = document.createElement("div");
        popup.id = "rez-popup";
        popup.style.position = "fixed";
        popup.style.top = "20px";
        popup.style.left = "50%";
        popup.style.transform = "translateX(-50%)";
        popup.style.background = "#ffdddd";
        popup.style.color = "#333";
        popup.style.padding = "12px 20px";
        popup.style.border = "1px solid #ff7777";
        popup.style.borderRadius = "8px";
        popup.style.zIndex = "9999";
        popup.style.fontSize = "16px";
        popup.style.boxShadow = "0 2px 6px rgba(0,0,0,0.2)";
        document.body.appendChild(popup);
      }

      popup.innerText = zprava;
      popup.style.display = "block";
      setTimeout(() => popup.style.display = "none", 3500);
    }
  });
</script>


</body>
</html>